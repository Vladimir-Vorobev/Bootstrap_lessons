{"remainingRequest":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\vovav\\Desktop\\ProfEvents\\src\\components\\LogIn.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\src\\components\\LogIn.vue","mtime":1594288331217},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgbmVlZGxlIGZyb20gIm5lZWRsZSINCmltcG9ydCBGb290ZXIgZnJvbSAnLi9mb290ZXIudnVlJw0KaW1wb3J0IFZ1ZSBmcm9tICd2dWUnDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogJ0xvZ2luJywNCiAgICBjb21wb25lbnRzOiB7IEZvb3RlciB9LA0KICAgIGJlZm9yZU1vdW50KCl7DQogICAgICAgIGlmKHRoaXMuJHN0b3JlLmdldHRlcnMuZW1haWwgIT0gJycgJiYgdGhpcy4kc3RvcmUuZ2V0dGVycy5TZXNzaW9uSUQgIT0gJycpew0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9wcm9maWxlIikNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBsb2dpblVzZXIoKXsNCiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCkNCiAgICAgICAgICAgIGxldCBmb3JtID0gZG9jdW1lbnQuZm9ybXNbMF0NCiAgICAgICAgICAgIGxldCBlbWFpbCA9IGZvcm0uZWxlbWVudHMuZW1haWwudmFsdWUNCiAgICAgICAgICAgIGxldCBwYXNzd29yZCA9IGZvcm0uZWxlbWVudHMucGFzc3dvcmQudmFsdWUNCiAgICAgICAgICAgIGxldCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKQ0KICAgICAgICAgICAgbGV0IGRhdGEgPSB7DQogICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLA0KICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBjcnlwdG8uY3JlYXRlSGFzaCgnbWQ1JykudXBkYXRlKHBhc3N3b3JkKS5kaWdlc3QoImhleCIpLCANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG5lZWRsZS5wb3N0KHRoaXMuJHN0b3JlLnN0YXRlLnNlcnZlcklwKycvYXBpL2xvZ2luJywgZGF0YSwgeyJqc29uIjogdHJ1ZX0sIGZ1bmN0aW9uKGVyciwgcmVzKXsNCiAgICAgICAgICAgICAgICBpZihlcnIpe2NvbnNvbGUubG9nKGVycil9IA0KICAgICAgICAgICAgICAgIGlmKHJlcy5ib2R5ID09ICdJbmNvcmVjdCBwYXNzd29yZCcpew0KICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KCfQndC10LLQtdGA0L3Ri9C5IGVtYWlsINC40LvQuCDQv9Cw0YDQvtC70YwnKQ0KICAgICAgICAgICAgICAgICAgICBWdWUuc3dhbCh7DQogICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ9Cd0LXQstC10YDQvdGL0LkgZW1haWwg0LjQu9C4INC/0LDRgNC+0LvRjCcNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYocmVzLmJvZHkgPT0gJ1VzZXIgdW5kZWZpbmVkJyl7DQogICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoJ9Cf0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDQvdC1INC90LDQudC00LXQvScpDQogICAgICAgICAgICAgICAgICAgIFZ1ZS5zd2FsKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdlcnJvcicsDQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAn0J/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINC90LUg0L3QsNC50LTQtdC9Jw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZihyZXMuYm9keS5sZW5ndGggPT0gMTI4KXsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gImVtYWlsPSIgKyBlbWFpbCArICI7IGV4cGlyZXM9IiArIG5ldyBEYXRlKERhdGUubm93KCkgKyA4NjQwMDBlMykudG9VVENTdHJpbmcoKQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSAiU2Vzc2lvbklEPSIgKyByZXMuYm9keSArICI7IGV4cGlyZXM9IiArIG5ldyBEYXRlKERhdGUubm93KCkgKyA4NjQwMDBlMykudG9VVENTdHJpbmcoKQ0KICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5ocmVmID0gIi9wcm9maWxlIg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIHNob3dIaWRlUHdkKCkgew0KICAgICAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBhc3N3b3JkIik7DQogICAgICAgICAgICBpZiAoaW5wdXQudHlwZSA9PT0gInBhc3N3b3JkIikgew0KICAgICAgICAgICAgICAgIGlucHV0LnR5cGUgPSAidGV4dCI7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImV5ZSIpLmNsYXNzTmFtZSA9ICJmYXIgZmEtZXllIjsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaW5wdXQudHlwZSA9ICJwYXNzd29yZCI7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImV5ZSIpLmNsYXNzTmFtZSA9ICJmYXIgZmEtZXllLXNsYXNoIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICB9DQp9DQo="},{"version":3,"sources":["LogIn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LogIn.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"main\">\r\n        <div class=\"container warp\">\r\n            <form class=\"formbox\">\r\n                <h2>Войти</h2>\r\n                <div class=\"form-group\" style=\"text-align: left\">\r\n                    <label for=\"exampleInputEmail1\">Email адресс</label>\r\n                    <input name=\"email\" class=\"form-control\" placeholder=\"example@gmail.com\" required>\r\n                </div>\r\n                <div style=\"text-align: left\">\r\n                    <label for=\"password\">Пароль</label>\r\n                </div>\r\n                <div class=\"form-label-group input-group\">\r\n                    <input type=\"password\" id=\"password\" class=\"form-control\" name=\"password\" placeholder=\"Пароль\" required>\r\n                    <div class=\"input-group-append\" @click=\"showHidePwd()\" style=\"cursor: pointer\">\r\n                        <span class=\"input-group-text\">\r\n                            <i id=\"eye\" class=\"far fa-eye-slash\"></i>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"form-group row\"> \r\n                    <button class=\"btn btn-primary btn-lg\" @click=\"loginUser()\">Войти</button>\r\n                </div>\r\n            </form>\r\n            <p><router-link to=\"/registration\" class=\"link\">Еще нет аккаунта? Зарегистрируйтесь</router-link></p>\r\n        </div>\r\n        <div class=\"footer\"><Footer></Footer></div> \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport needle from \"needle\"\r\nimport Footer from './footer.vue'\r\nimport Vue from 'vue'\r\nexport default {\r\n    name: 'Login',\r\n    components: { Footer },\r\n    beforeMount(){\r\n        if(this.$store.getters.email != '' && this.$store.getters.SessionID != ''){\r\n            this.$router.push(\"/profile\")\r\n        }\r\n    },\r\n    methods: {\r\n        loginUser(){\r\n            event.preventDefault()\r\n            let form = document.forms[0]\r\n            let email = form.elements.email.value\r\n            let password = form.elements.password.value\r\n            let crypto = require('crypto')\r\n            let data = {\r\n                email: email,\r\n                password: crypto.createHash('md5').update(password).digest(\"hex\"), \r\n            }\r\n            needle.post(this.$store.state.serverIp+'/api/login', data, {\"json\": true}, function(err, res){\r\n                if(err){console.log(err)} \r\n                if(res.body == 'Incorect password'){\r\n                    //alert('Неверный email или пароль')\r\n                    Vue.swal({\r\n                        icon: 'error',\r\n                        text: 'Неверный email или пароль'\r\n                    });\r\n                }\r\n                else if(res.body == 'User undefined'){\r\n                    //alert('Пользователь не найден')\r\n                    Vue.swal({\r\n                        icon: 'error',\r\n                        text: 'Пользователь не найден'\r\n                    });\r\n                }\r\n                else if(res.body.length == 128){\r\n                    document.cookie = \"email=\" + email + \"; expires=\" + new Date(Date.now() + 864000e3).toUTCString()\r\n                    document.cookie = \"SessionID=\" + res.body + \"; expires=\" + new Date(Date.now() + 864000e3).toUTCString()\r\n                    document.location.href = \"/profile\"\r\n                }\r\n            })\r\n        },\r\n        showHidePwd() {\r\n            var input = document.getElementById(\"password\");\r\n            if (input.type === \"password\") {\r\n                input.type = \"text\";\r\n                document.getElementById(\"eye\").className = \"far fa-eye\";\r\n            } else {\r\n                input.type = \"password\";\r\n                document.getElementById(\"eye\").className = \"far fa-eye-slash\";\r\n            }\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.warp{\r\n    flex: 1 0 auto;\r\n    padding-top: 210px !important;\r\n    background-color: #fff;\r\n    padding: 0px 30px;\r\n}\r\n.footer{\r\n    flex: 0 0 auto;\r\n}\r\n.main{\r\n    display: flex;\r\n\tflex-direction: column;\r\n}\r\n.main{\r\n    height: 100%;\r\n    padding: 0px;\r\n    min-height: 100vh;\r\n    margin-bottom: 0px;\r\n}\r\n\r\n.main p{\r\n    color: #4f4f50;\r\n    text-align: left !important;\r\n    font-size: 0.86em;\r\n    margin-left: -10px;\r\n}\r\n.link{\r\n    color: #4f4f50;\r\n    text-decoration: none;\r\n}\r\n.link:hover{\r\n    color: #EF5B65;\r\n    text-decoration: none;\r\n}\r\n\r\n.form-label-group {\r\n    position: relative;\r\n    margin-bottom: 1rem;\r\n}\r\n\r\ni:hover {\r\n    cursor: pointer;\r\n}\r\n</style>"]}]}