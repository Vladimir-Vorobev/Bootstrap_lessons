{"remainingRequest":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\vovav\\Desktop\\ProfEvents\\src\\components\\Registration.vue?vue&type=style&index=0&id=5d567869&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\src\\components\\Registration.vue","mtime":1594288593223},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLndhcnB7DQogICAgZmxleDogMSAwIGF1dG87DQogICAgcGFkZGluZy10b3A6IDExMHB4ICFpbXBvcnRhbnQ7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgICBwYWRkaW5nOiAwcHggMzBweDsNCn0NCi5mb290ZXJ7DQogICAgZmxleDogMCAwIGF1dG87DQp9DQoubWFpbnsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KCWZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQp9DQoubWFpbnsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgcGFkZGluZzogMHB4Ow0KICAgIG1pbi1oZWlnaHQ6IDEwMHZoOw0KICAgIG1hcmdpbi1ib3R0b206IDBweDsNCn0NCg=="},{"version":3,"sources":["Registration.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Registration.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"main\">\r\n        <div class=\"container warp\">\r\n            <form class=\"formbox\">\r\n                <h2>Регистрация</h2>\r\n                <div class=\"form-group row\">\r\n                    <label for=\"exampleInputEmail1\">Имя</label>\r\n                    <input name=\"name\" class=\"form-control\" placeholder=\"Иван\" required>\r\n                </div>\r\n                <div class=\"form-group row\">\r\n                    <label for=\"exampleInputEmail1\">Фамилия</label>\r\n                    <input name=\"surname\" class=\"form-control\" placeholder=\"Иванов\" required>\r\n                </div>\r\n                <div class=\"form-group row\">\r\n                    <label for=\"exampleInputEmail1\">Email адресс</label>\r\n                    <input type=\"email\" name=\"email\" class=\"form-control\" placeholder=\"example@gmail.com\" required>\r\n                    </div>\r\n                <div class=\"form-group row\">\r\n                    <label for=\"exampleInputEmail1\">Дата рождения</label>\r\n                    <input type=\"date\" class=\"form-control\" name=\"age\" min=\"1900-01-01\" required>\r\n                </div>\r\n                <div class=\"form-group row\">\r\n                    <label for=\"exampleInputPassword1\">Пароль {{passwordText}}</label>\r\n                    <input type=\"password\" class=\"form-control\" name=\"password\" placeholder=\"1234567\" required>\r\n                </div>\r\n                <div class=\"form-group row\">\r\n                    <label for=\"exampleInputPassword1\">Повторите пароль</label>\r\n                    <input type=\"password\" class=\"form-control\" name=\"password2\" placeholder=\"1234567\" required>\r\n                </div>\r\n                <div class=\"form-group row code\" style=\"display: none;\">\r\n                    <label for=\"exampleInputPassword1\">Введите код подтверждения из Вашей почты</label>\r\n                    <input type=\"password\" class=\"form-control\" name=\"code\" placeholder=\"1234567\">\r\n                </div>\r\n                <div class=\"row\"> \r\n                    <button class=\"btn btn-primary btn-lg\" @click=\"addUser()\">Зарегистрироваться</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n        <div class=\"footer\"><Footer></Footer></div> \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport needle from \"needle\"\r\nimport Vue from 'vue'\r\nimport Footer from './footer.vue'\r\nexport default {\r\n    name: 'Registration',\r\n    components: { Footer },\r\n    data(){\r\n        return{\r\n            passwordText: \"\"\r\n        }\r\n    },\r\n    methods: {\r\n        addUser(){\r\n            event.preventDefault()\r\n            let re = /^([A-Za-z0-9_\\-.])+@([A-Za-z0-9_\\-.])+\\.([A-Za-z]{2,4})$/\r\n            let form = document.forms[0]\r\n            let namet = form.elements.name.value\r\n            let surname = form.elements.surname.value\r\n            let email = form.elements.email.value.replace(/\\s/g, '')\r\n            let age = form.elements.age.value\r\n            let password = form.elements.password.value\r\n            let password2 = form.elements.password2.value\r\n            let code = form.elements.code.value\r\n            if(namet.trim() == ''){\r\n                //alert(\"Введите имя\")\r\n                this.$swal({\r\n                    icon: 'warning',\r\n                    text: 'Введите имя'\r\n                });\r\n            }\r\n            else if(surname.trim() == ''){\r\n                //alert(\"Введите фамилию\")\r\n                this.$swal({\r\n                    icon: 'warning',\r\n                    text: 'Введите фамилию'\r\n                });\r\n            }\r\n            else if(email.trim() == ''){\r\n                //alert(\"Введите email\")\r\n                this.$swal({\r\n                    icon: 'warning',\r\n                    text: 'Введите email'\r\n                });\r\n            }\r\n            else if(age.trim() == ''){\r\n                //alert(\"Введите дату рождения\")\r\n                this.$swal({\r\n                    icon: 'warning',\r\n                    text: 'Введите дату рождения'\r\n                });\r\n            }\r\n            else if(password.trim() == ''){\r\n                //alert(\"Введите пароль\")\r\n                this.$swal({\r\n                    icon: 'warning',\r\n                    text: 'Введите пароль'\r\n                });\r\n            }\r\n            else if(password != password2){\r\n                //alert(\"Пароли не совпадают\")\r\n                this.$swal({\r\n                    icon: 'error',\r\n                    text: 'Пароли не совпадают'\r\n                });\r\n            }\r\n            else if(re.test(email) == false){\r\n                //alert(\"Введен некорректный email\")\r\n                this.$swal({\r\n                    icon: 'error',\r\n                    text: 'Введен некорректный email'\r\n                });\r\n            }\r\n            else if(password.length < 5){\r\n                //alert(\"Пароль слишком короткий\")\r\n                this.$swal({\r\n                    icon: 'error',\r\n                    text: 'Пароль слишком короткий'\r\n                });\r\n            }\r\n            else if(password.length > 15){\r\n                //alert(\"Пароль слишком длинный\")\r\n                this.$swal({\r\n                    icon: 'error',\r\n                    text: 'Пароль слишком длинный'\r\n                });\r\n            }\r\n            else{\r\n                let data = document.cookie.split(\";\")\r\n                let name = ''\r\n                let b = 0\r\n                for(let i = 0; i < data.length; i++){\r\n                    let value = data[i].toString()\r\n                    for(let j = 0; j < value.length; j++){\r\n                        if(data[i][j] == \"=\"){\r\n                            if(name == '_relx'){\r\n                            b = 1\r\n                            }\r\n                            name = ''\r\n                        }\r\n                        else if(data[i][j] != \" \"){\r\n                            name += data[i][j]\r\n                        }\r\n                    }\r\n                    if(b == 1){\r\n                        this.codeCheck = name\r\n                        break\r\n                    }\r\n                    name = ''\r\n                }\r\n                if(document.querySelector('.code').style.display == 'none'){\r\n                    document.querySelector('.code').style.display = 'block'\r\n                    needle.post(this.$store.state.serverIp+'/api/mailCheck', {email: email}, {\"json\": true}, function(err, res){\r\n                        if (err) throw err\r\n                        alert(res.body)\r\n                        document.cookie = \"_relx=\" + res.body\r\n                    })\r\n                }\r\n                else if(code == this.codeCheck){\r\n                    let crypto = require('crypto')\r\n                    let data = {\r\n                        name: namet,\r\n                        surname: surname,\r\n                        email: email,\r\n                        age: age,\r\n                        password: crypto.createHash('md5').update(password).digest(\"hex\"),\r\n                    }\r\n                    needle.post(this.$store.state.serverIp+'/api/registration', data, {\"json\": true}, function(err, res, body){\r\n                        if(body == \"Reg succsesful\"){\r\n                            Vue.swal({\r\n                                icon: 'success',\r\n                                title: 'Вы успешно зарегистрированы!',\r\n                                showConfirmButton: false,\r\n                                timer: 2000,\r\n                                timerProgressBar: true,\r\n                            }).then(() => {\r\n                                document.location.href = \"/login\"\r\n                            });\r\n                            //document.location.href = \"/login\"\r\n                        }\r\n                        else if(body == \"Reg Fail\"){\r\n                            //alert('Пользователь с таким email существует')\r\n                            Vue.swal({\r\n                                icon: 'error',\r\n                                text: 'Пользователь с таким email существует'\r\n                            });\r\n                        }\r\n                        else{\r\n                            //alert(\"Регистрация не удалась. Возможно, у Вас проблема с интернетом, или на нашем сервере ведутся технические работы\")\r\n                            Vue.swal({\r\n                                icon: 'error',\r\n                                text: 'Регистрация не удалась. Возможно, у Вас проблема с интернетом, или на нашем сервере ведутся технические работы'\r\n                            });\r\n                        }\r\n                    })\r\n                }\r\n                else{\r\n                    //alert('Проверьте Вашу почту, на нее был выслан код подтверждения')\r\n                    Vue.swal({  \r\n                        icon: 'info',\r\n                        text: 'Проверьте Вашу почту, на нее был выслан код подтверждения'\r\n                    });\r\n                }\r\n            }\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.warp{\r\n    flex: 1 0 auto;\r\n    padding-top: 110px !important;\r\n    background-color: #fff;\r\n    padding: 0px 30px;\r\n}\r\n.footer{\r\n    flex: 0 0 auto;\r\n}\r\n.main{\r\n    display: flex;\r\n\tflex-direction: column;\r\n}\r\n.main{\r\n    height: 100%;\r\n    padding: 0px;\r\n    min-height: 100vh;\r\n    margin-bottom: 0px;\r\n}\r\n</style>"]}]}