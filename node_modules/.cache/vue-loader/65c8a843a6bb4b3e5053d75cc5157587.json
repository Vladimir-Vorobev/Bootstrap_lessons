{"remainingRequest":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\vovav\\Desktop\\ProfEvents\\src\\components\\OpenDays.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\src\\components\\OpenDays.vue","mtime":1594106006483},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgbmVlZGxlIGZyb20gJ25lZWRsZScNCmltcG9ydCBGb290ZXIgZnJvbSAnLi9mb290ZXIudnVlJw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICdPcGVuRGF5cycsDQogICAgY29tcG9uZW50czogeyBGb290ZXIgfSwNCiAgICBkYXRhKCl7DQogICAgICAgIHJldHVybnsNCiAgICAgICAgICAgIGRhdGE6IFtdDQogICAgICAgIH0NCiAgICB9LA0KICAgIGJlZm9yZU1vdW50KCl7DQogICAgICAgIGZldGNoKHRoaXMuJHN0b3JlLnN0YXRlLnNlcnZlcklwKycvYXBpL2dldEFsbEV2ZW50cycsIHsNCiAgICAgICAgICAgIG1ldGhvZDogJ2dldCcsDQogICAgICAgIH0pDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJyZXMiLCByZXNwb25zZSkNCiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhLm9wZW4NCiAgICAgICAgfSkNCiAgICB9LA0KICAgIG1vdW50ZWQoKXsNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oew0KICAgICAgICAgICAgICAgIHRvcDogdGhpcy4kc3RvcmUuZ2V0dGVycy5vcGVuRGF5c1Njcm9sbCwNCiAgICAgICAgICAgICAgICBiZWhhdmlvcjogJ2F1dG8nDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwgNTAwKTsNCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdTRVRfT1BFTl9EQVlTX1NDUk9MTCcsIDApDQogICAgfSwNCiAgICBtZXRob2RzOnsNCiAgICAgICAgYWRkKGV2ZW50KXsNCiAgICAgICAgICAgIGxldCBlbWFpbCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZW1haWwNCiAgICAgICAgICAgIGxldCBTZXNzaW9uSUQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLlNlc3Npb25JRA0KICAgICAgICAgICAgaWYoZW1haWwgIT0gJycpew0KICAgICAgICAgICAgICAgIGRlbGV0ZSBldmVudC5wbGFjZXMNCiAgICAgICAgICAgICAgICBuZWVkbGUucG9zdCh0aGlzLiRzdG9yZS5zdGF0ZS5zZXJ2ZXJJcCsnL2FwaS9jaGVja2VkRXZlbnRzVXBkYXRlJywge2VtYWlsOiBlbWFpbCwgZXZlbnRzOiBldmVudCwgc2Vzc2lvbmlkOiBTZXNzaW9uSUR9LCB7Impzb24iOiB0cnVlfSwgZnVuY3Rpb24ocmVzLCBlcnIpew0KICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB0aHJvdyBlcnINCiAgICAgICAgICAgICAgICAgICAgaWYocmVzLmJvZHkgPT0gJzMxMCcpew0KICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gImVtYWlsPSIgKyAiO2V4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMSBHTVQiDQogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSAiU2Vzc2lvbklEPSIgKyAiO2V4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMSBHTVQiDQogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvbG9naW4nDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPSAiL2xvZ2luIg0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzZXRTY3JvbGwoKXsNCiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICJvcGVuRGF5c1Njcm9sbD0iICsgd2luZG93LnBhZ2VZT2Zmc2V0DQogICAgICAgIH0NCiAgICB9DQp9ICAgICAgICAgICAgDQo="},{"version":3,"sources":["OpenDays.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"OpenDays.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"main\">\r\n        <div class=\"container warp\">\r\n            <div class=\"card\" v-for=\"item in data\" :key=\"item.value\">\r\n                <div class=\"card-header\">{{item.date}}</div>\r\n                <div class=\"card-body\">\r\n                    <h5 class=\"card-title\">{{item.name}}</h5>\r\n                    <p class=\"card-text\"><i class=\"far fa-clock\"></i> {{item.time}}</p>\r\n                    <p class=\"card-text\">Тип: {{item.type}}</p>\r\n                    <p><button class=\"btn btn-info\"  @click=\"add(item)\">Собираюсь посетить</button></p>\r\n                    <a :href=\"item.link\" class=\"btn btn-primary\" @click=\"setScroll()\">Перейти к мероприятию</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"footer\"><Footer></Footer></div> \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport needle from 'needle'\r\nimport Footer from './footer.vue'\r\nexport default {\r\n    name: 'OpenDays',\r\n    components: { Footer },\r\n    data(){\r\n        return{\r\n            data: []\r\n        }\r\n    },\r\n    beforeMount(){\r\n        fetch(this.$store.state.serverIp+'/api/getAllEvents', {\r\n            method: 'get',\r\n        })\r\n        .then(response => {\r\n            console.log(\"res\", response)\r\n            return response.json()\r\n        })\r\n        .then(data => {\r\n            this.data = data.open\r\n        })\r\n    },\r\n    mounted(){\r\n        setTimeout(() => {\r\n            window.scrollTo({\r\n                top: this.$store.getters.openDaysScroll,\r\n                behavior: 'auto'\r\n            });\r\n        }, 500);\r\n        this.$store.commit('SET_OPEN_DAYS_SCROLL', 0)\r\n    },\r\n    methods:{\r\n        add(event){\r\n            let email = this.$store.getters.email\r\n            let SessionID = this.$store.getters.SessionID\r\n            if(email != ''){\r\n                delete event.places\r\n                needle.post(this.$store.state.serverIp+'/api/checkedEventsUpdate', {email: email, events: event, sessionid: SessionID}, {\"json\": true}, function(res, err){\r\n                    if (err) throw err\r\n                    if(res.body == '310'){\r\n                        document.cookie = \"email=\" + \";expires=Thu, 01 Jan 1970 00:00:01 GMT\"\r\n                        document.cookie = \"SessionID=\" + \";expires=Thu, 01 Jan 1970 00:00:01 GMT\"\r\n                        window.location.href = '/login'\r\n                    }\r\n                })\r\n            }\r\n            else{\r\n                window.location.pathname = \"/login\"\r\n            }\r\n        },\r\n        setScroll(){\r\n            document.cookie = \"openDaysScroll=\" + window.pageYOffset\r\n        }\r\n    }\r\n}            \r\n</script>\r\n\r\n<style scoped>\r\n.warp{\r\n    flex: 1 0 auto;\r\n}\r\n.footer{\r\n    flex: 0 0 auto;\r\n}\r\n.main{\r\n    display: flex;\r\n\tflex-direction: column;\r\n    padding-top: 110px !important;\r\n}\r\n.main{\r\n    background-color: #eef5ff;\r\n    height: 100%;\r\n    padding: 30px 0px 0px;\r\n    min-height: 100vh;\r\n    margin-bottom: 0px;\r\n}\r\n.card{ \r\n    margin-top: 10px !important;\r\n}\r\n.card-body{ \r\n    text-align: left !important;\r\n}\r\n.card-header{\r\n    font-weight: bold;\r\n}\r\n.card-body h5{ \r\n    font-weight: bold;\r\n}\r\n</style>"]}]}