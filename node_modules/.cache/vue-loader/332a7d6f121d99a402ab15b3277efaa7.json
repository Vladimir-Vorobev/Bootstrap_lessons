{"remainingRequest":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\vovav\\Desktop\\ProfEvents\\src\\components\\UserProfile.vue?vue&type=style&index=0&id=6ef6ca5e&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\src\\components\\UserProfile.vue","mtime":1594539387496},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLndhcnB7DQogICAgZmxleDogMSAwIGF1dG87DQp9DQouZm9vdGVyew0KICAgIGZsZXg6IDAgMCBhdXRvOw0KfQ0KLm1haW57DQogICAgZGlzcGxheTogZmxleDsNCglmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgIHBhZGRpbmctdG9wOiA5NXB4ICFpbXBvcnRhbnQ7DQp9DQoubWFpbnsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgcGFkZGluZzogMzBweCAwcHggMHB4Ow0KICAgIG1pbi1oZWlnaHQ6IDEwMHZoOw0KICAgIG1hcmdpbi1ib3R0b206IDBweDsNCn0NCg0KLnBibG9ja3sNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGhlaWdodDogMTAwJTsNCiAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwcHggMnB4IDVweCAxcHggcmdiYSgzNCwgNjAsIDgwLCAwLjE4KTsNCiAgICAtbW96LWJveC1zaGFkb3c6IDBweCAycHggNXB4IDFweCByZ2JhKDM0LCA2MCwgODAsIDAuMTgpOw0KICAgIGJveC1zaGFkb3c6IDBweCAycHggNXB4IDFweCByZ2JhKDM0LCA2MCwgODAsIDAuMTgpOw0KICAgIG1pbi1oZWlnaHQ6IDMwMHB4Ow0KICAgIHBhZGRpbmc6IDE1cHggMjBweDsNCn0NCi5hdmF0YXJ7DQogICAgLyogb2JqZWN0LWZpdDogZmlsbDsgZmlsbCBvciBjb250YWluICovDQogICAgZGlzcGxheTogYmxvY2s7DQogICAgLyogbWF4LXdpZHRoOiAxMDAlOw0KICAgIG1heC1oZWlnaHQ6IDEwMCU7ICovDQogICAgbWF4LXdpZHRoOiAzMTBweDsNCiAgICBtYXgtaGVpZ2h0OiAzMTBweDsNCiAgICBtaW4td2lkdGg6IDMxMHB4Ow0KICAgIG1pbi1oZWlnaHQ6IDMxMHB4Ow0KfQ0KLmF2YXRhciBpbWd7DQogICAgbWF4LXdpZHRoOiAxMDAlOw0KICAgIG1heC1oZWlnaHQ6IDEwMCU7DQogICAgbWluLWhlaWdodDogMzEwcHg7DQp9DQoNCg0KLmluZm97DQogICAgdGV4dC1hbGlnbjogbGVmdDsNCn0NCg0K"},{"version":3,"sources":["UserProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA","file":"UserProfile.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"main\">\r\n        <div class=\"container warp\">\r\n            <div class=\"person_info row\" >\r\n                <div class=\"col-12 col-md-4\" style=\"padding: 30px 15px 15px\">\r\n                    <div class=\"photo pblock\">\r\n                        <div class=\"avatar\">\r\n                            <img src=\"./../assets/noavatar.jpg\" alt=\"\">\r\n                        </div>\r\n                        <button @click=\"GoToEditor()\" class=\"btn btn-light\" style=\"width: 100%; margin-top: 15px;\">Редактировать</button>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div class=\"col-12 col-md-8\" style=\"padding: 30px 15px 15px\">\r\n                    <div class=\"pblock\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-9\"><h4 style=\"margin-bottom: 0px;\">{{person_name}}</h4></div>\r\n                            <div class=\"col-3\">\r\n                                <small class=\"text-muted\" style=\"vertical-align: bottom;\">online</small>\r\n                            </div>\r\n                        </div>\r\n                        <hr style=\"margin-top: 3px;\">\r\n                        <div class=\"info\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-6 text-muted\">Дата рождения: </div>\r\n                                <div class=\"col-6\">{{person_date}}</div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"col-6 text-muted\">Школа: </div>\r\n                                <div class=\"col-6\">{{person_school}}</div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"col-6 text-muted\">Класс и символ: </div>\r\n                                <div class=\"col-6\">{{person_grade}}</div>\r\n                            </div>\r\n                        </div>\r\n                        <div style=\"border-top: 1px solid lightgray; margin-top: 150px; margin-right: -20px; margin-left: -20px\">\r\n                            <div class=\"row justify-content-center container\" style=\"padding: 0px 20px;\">\r\n                                <div class=\"col-4 col-md-2\" style=\"height: 100%; padding: 15px 0px; margin: 0px 15px\">\r\n                                    <div @click=\"PersonFriends()\" style=\"font-size: 22px; color: #2a5885; padding-bottom: 3px; line-height: 21px; cursor: pointer;\">22</div>\r\n                                    <div style=\"line-height: 15px; color: #828282;\">друга</div>\r\n                                </div>\r\n                                <div class=\"col-5 col-md-3\" style=\"height: 100%; padding: 15px 0px; margin: 0px 15px\">\r\n                                    <div @click=\"PersonEvents()\" style=\"font-size: 22px; color: #2a5885; padding-bottom: 3px; line-height: 21px; cursor: pointer;\">30</div>\r\n                                    <div style=\"line-height: 15px; color: #828282;\">мероприятий</div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"person_statistic row\" style=\"padding: 15px 15px\">\r\n                <div class=\"pblock\">\r\n                    <h4>Статистика:</h4>\r\n                    <div style=\"text-align: center;\"><i class='fa fa-spinner fa-pulse fa-3x' :id='person_email + \"x\"' style=\"display: inline-block;\"></i></div>\r\n                    <form :id=\"'form' + person_email\">\r\n                        <input class=\"radio\" :name=\"'donaught' + person_email\" type=\"radio\" value=\"donaught\" checked @click=\"changeInfo(person_email, 'donaught')\"> Кругова диаграмма\r\n                        <input class=\"radio\" :name=\"'bar' + person_email\" type=\"radio\" value=\"bar\" @click=\"changeInfo(person_email, 'bar')\"> Столбчатая диаграмма\r\n                        <input class=\"radio\" :name=\"'full' + person_email\" type=\"radio\" value=\"full\" @click=\"changeInfo(person_email)\"> Полная статистика\r\n                    </form>\r\n                    <div class=\"chart-container\" :id=\"'chartDiv' + person_email\" style=\"display: none;\"><canvas :id=\"'chart' + person_email\"></canvas></div>\r\n                    <div class=\"chart-container\" :id=\"'chartDiv2' + person_email\" style=\"display: none;\"><canvas :id=\"'chart2' + person_email\"></canvas></div>\r\n                    <div :id=\"'chartDiv3' + person_email\" style=\"display: none;\">\r\n                        <div v-if=\"studentEvents[person_email] != undefined && studentEvents[person_email].length == 0\"><h3>Нет мероприятий</h3></div>\r\n                        <div class=\"card\" v-for=\"item3 in studentEvents[person_email]\" :key=\"item3.value\">\r\n                            <div class=\"card-header\">{{item3.date}}</div>\r\n                            <div class=\"card-body\">\r\n                                <div class=\"row\">\r\n                                    <h5 class=\"card-title col-11\">{{item3.name}}</h5>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"person_events row\" style=\"padding: 15px 15px 30px\">\r\n                <div class=\"pblock\">\r\n                    <h4>Ближайшие мероприятия:</h4>\r\n                    <div class=\"row\">\r\n                        <div class=\"col-12 col-md-5\">\r\n                            <h5>Направеление:</h5> \r\n                        </div>\r\n                        <div class=\"col-12 col-md-7\">\r\n                            <select class=\"custom-select custom-select-sm mb-3 events\" style=\"width: 100%;\">\r\n                                <option value=\"\" selected>Все</option>\r\n                                <option value=\"\">IT</option>\r\n                                <option value=\"\">Инженерия</option>\r\n                                <option value=\"\">Сфера услуг</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"footer\"><Footer></Footer></div> \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Footer from './footer.vue'\r\nimport Vue from 'vue';\r\nimport Chart from 'chart.js'\r\nexport default {\r\n    name: 'UserProfile',\r\n    components: { Footer },\r\n    data(){\r\n      return{\r\n        id: this.$route.params.id,\r\n        email: this.$store.getters.email,\r\n        SessionID: this.$store.getters.SessionID,\r\n        person_name: ' ',\r\n        person_date: ' ',\r\n        person_grade: ' ',\r\n        person_school: ' ',\r\n        person_email: '',\r\n        studentEvents: [],\r\n      }\r\n    },\r\n    beforeMount(){ \r\n        fetch(this.$store.state.serverIp+'/api/getIdInformation', {\r\n            method: 'POST',\r\n            headers: {id: this.id, email: this.email, sessionid: this.SessionID},\r\n        })\r\n        .then(response => {\r\n            console.log(\"res\", response)\r\n            return response.json()\r\n        })\r\n        .then(data => {\r\n            if(data == '310'){\r\n                // document.cookie = \"email=\" + \";expires=Thu, 01 Jan 1970 00:00:01 GMT\"\r\n                // document.cookie = \"SessionID=\" + \";expires=Thu, 01 Jan 1970 00:00:01 GMT\"\r\n                // window.location.reload()\r\n                console.log(\"err 310\")\r\n            }\r\n            if(data.email == undefined) window.location.pathname = \"/login\"\r\n            this.person_name = data.name + ' ' + data.surname\r\n            this.person_email = data.email\r\n            let personDate = data.age\r\n            personDate = personDate.split('-')\r\n            personDate = new Date(personDate[0], personDate[1]-1, personDate[2]);\r\n            var options = {\r\n                year: 'numeric',\r\n                month: 'long',\r\n                day: 'numeric',\r\n            };\r\n            this.person_date = personDate.toLocaleString(\"ru\", options)\r\n            if(data.class_number != undefined || data.simvol != undefined){\r\n                this.person_grade = data.class_number + ' ' + data.simvol\r\n            }\r\n            else{\r\n                this.person_grade = 'Не указаны'\r\n            }\r\n            if(data.school != undefined){\r\n                this.person_school = data.school\r\n            }\r\n            else{\r\n                this.person_school = 'Не указана'\r\n            }\r\n            this.showInfo()\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        })\r\n    },\r\n    methods: {\r\n        PersonEvents(){\r\n            //надо сделать переход на мероприятия этого человека, пока тут alert\r\n            Vue.swal({\r\n                icon: 'error',\r\n                text: 'Функция временно не доступна!',\r\n                showConfirmButton: false,\r\n                timer: 1500,\r\n                timerProgressBar: true,\r\n            });\r\n        },\r\n        PersonFriends(){\r\n            //надо сделать переход на список друзей этого человека, пока тут alert\r\n            Vue.swal({\r\n                icon: 'error',\r\n                text: 'Функция временно не доступна!',\r\n                showConfirmButton: false,\r\n                timer: 1500,\r\n                timerProgressBar: true,\r\n            });\r\n        },\r\n        GoToEditor(){\r\n            this.$router.push({ path: `/user-profile-edit` })\r\n        },\r\n        showInfo(){\r\n            let SessionID = this.$store.getters.SessionID\r\n            let user_email = this.email\r\n            fetch(this.$store.state.serverIp+'/api/getCheckedEvents', {\r\n                method: 'get',\r\n                headers: {email: user_email, studEmail: this.person_email, sessionid: SessionID},\r\n            })\r\n            .then(response => {\r\n                console.log(\"res\", response)\r\n                return response.json()\r\n            })\r\n            .then(datan => {\r\n                let statistics = datan.stat\r\n                this.$set(this.studentEvents, this.person_email, datan.checkedEvents)\r\n                let ctx = document.getElementById('chart' + this.person_email)\r\n                let ctx2 = document.getElementById('chart2' + this.person_email)\r\n                makeChart('doughnut', [statistics.service, statistics.programming, 0, 0,  statistics.engeniring, 0], ctx)\r\n                makeChart('bar', [statistics.service, statistics.programming, 0, 0,  statistics.engeniring, 0], ctx2)\r\n                document.getElementById(this.person_email + \"x\").style.display = 'none'\r\n                document.getElementById('chartDiv' + this.person_email).style.display = 'block'\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n            function makeChart(type, data, place){\r\n                let myChart = new Chart(place, {\r\n                    type: type,\r\n                    data: {\r\n                        labels: ['Сфера услуг', 'IT', 'Творчество и Дизайн', 'Строительство', 'Инжинерные технологии', 'Транспорт и логистика'],\r\n                        datasets: [{\r\n                            label: '# of Votes',\r\n                            data: data,\r\n                            backgroundColor: [\r\n                                'rgba(255, 99, 132, 0.5)',\r\n                                'rgba(54, 162, 235, 0.5)',\r\n                                'rgba(255, 206, 86, 0.5)',\r\n                                'rgba(75, 192, 192, 0.5)',\r\n                                'rgba(153, 102, 255, 0.5)',\r\n                                'rgba(255, 159, 64, 0.5)'\r\n                            ],\r\n                            borderColor: [\r\n                                'rgba(255, 99, 132, 1)',\r\n                                'rgba(54, 162, 235, 1)',\r\n                                'rgba(255, 206, 86, 1)',\r\n                                'rgba(75, 192, 192, 1)',\r\n                                'rgba(153, 102, 255, 1)',\r\n                                'rgba(255, 159, 64, 1)'\r\n                            ],\r\n                            borderWidth: 1,\r\n                            hoverBorderWidth: 5,\r\n                        }]\r\n                    },\r\n                    options: {\r\n                        legend: {\r\n                            position: 'bottom',\r\n                        }\r\n                    }\r\n                });\r\n                console.log(myChart)\r\n            }\r\n        },\r\n        changeInfo(email, chart){\r\n            let form = document.getElementById('form' + email)\r\n            if(chart == 'donaught'){\r\n                form['bar' + email].checked = false\r\n                form['full' + email].checked = false\r\n                document.getElementById('chartDiv' + email).style.display = 'block'\r\n                document.getElementById('chartDiv2' + email).style.display = 'none'\r\n                document.getElementById('chartDiv3' + email).style.display = 'none'\r\n            }\r\n            else if(chart == 'bar'){\r\n                form['donaught' + email].checked = false\r\n                form['full' + email].checked = false\r\n                document.getElementById('chartDiv' + email).style.display = 'none'\r\n                document.getElementById('chartDiv2' + email).style.display = 'block'\r\n                document.getElementById('chartDiv3' + email).style.display = 'none'\r\n            }\r\n            else{\r\n                form['donaught' + email].checked = false\r\n                form['bar' + email].checked = false\r\n                document.getElementById('chartDiv' + email).style.display = 'none'\r\n                document.getElementById('chartDiv2' + email).style.display = 'none'\r\n                document.getElementById('chartDiv3' + email).style.display = 'block'\r\n            }\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.warp{\r\n    flex: 1 0 auto;\r\n}\r\n.footer{\r\n    flex: 0 0 auto;\r\n}\r\n.main{\r\n    display: flex;\r\n\tflex-direction: column;\r\n    padding-top: 95px !important;\r\n}\r\n.main{\r\n    height: 100%;\r\n    padding: 30px 0px 0px;\r\n    min-height: 100vh;\r\n    margin-bottom: 0px;\r\n}\r\n\r\n.pblock{\r\n    background-color: #ffffff;\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 4px;\r\n    -webkit-box-shadow: 0px 2px 5px 1px rgba(34, 60, 80, 0.18);\r\n    -moz-box-shadow: 0px 2px 5px 1px rgba(34, 60, 80, 0.18);\r\n    box-shadow: 0px 2px 5px 1px rgba(34, 60, 80, 0.18);\r\n    min-height: 300px;\r\n    padding: 15px 20px;\r\n}\r\n.avatar{\r\n    /* object-fit: fill; fill or contain */\r\n    display: block;\r\n    /* max-width: 100%;\r\n    max-height: 100%; */\r\n    max-width: 310px;\r\n    max-height: 310px;\r\n    min-width: 310px;\r\n    min-height: 310px;\r\n}\r\n.avatar img{\r\n    max-width: 100%;\r\n    max-height: 100%;\r\n    min-height: 310px;\r\n}\r\n\r\n\r\n.info{\r\n    text-align: left;\r\n}\r\n\r\n</style>"]}]}