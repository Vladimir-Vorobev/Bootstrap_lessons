{"remainingRequest":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\vovav\\Desktop\\ProfEvents\\src\\components\\Statistics.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\src\\components\\Statistics.vue","mtime":1594106006495},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgRm9vdGVyIGZyb20gJy4vZm9vdGVyLnZ1ZScNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAnU3RhdGlzdGljcycsDQogICAgY29tcG9uZW50czogeyBGb290ZXIgfSwNCiAgICBkYXRhKCl7DQogICAgICAgIHJldHVybnsNCiAgICAgICAgICAgIGRhdGE6IFtdLA0KICAgICAgICAgICAgZGlyZWN0b3I6IGZhbHNlLA0KICAgICAgICAgICAgczogMCwNCiAgICAgICAgICAgIGE6IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLF0sDQogICAgICAgICAgICBjOiBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCxdLA0KICAgICAgICAgICAgZDogWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsXSwNCiAgICAgICAgICAgIGU6IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLF0sDQogICAgICAgIH0NCiAgICB9LA0KICAgIGJlZm9yZU1vdW50KCl7DQogICAgICAgIGlmKHRoaXMuJHN0b3JlLmdldHRlcnMuZW1haWwgPT0gJycpew0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKQ0KICAgICAgICB9DQogICAgICAgIGxldCBlbWFpbCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZW1haWwNCiAgICAgICAgbGV0IFNlc3Npb25JRCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuU2Vzc2lvbklEDQogICAgICAgIGZldGNoKHRoaXMuJHN0b3JlLnN0YXRlLnNlcnZlcklwKycvYXBpL2dldE90aGVySW5mb3JtYXRpb24nLCB7DQogICAgICAgIG1ldGhvZDogJ2dldCcsDQogICAgICAgIGhlYWRlcnM6IHtlbWFpbDogZW1haWwsIHNlc3Npb25pZDogU2Vzc2lvbklEfSwNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2coInJlcyIsIHJlc3BvbnNlKQ0KICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKQ0KICAgICAgICB9KQ0KICAgICAgICAudGhlbihkYXRhbiA9PiB7DQogICAgICAgICAgICBpZihkYXRhbiA9PSAnMzEwJyl7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gImVtYWlsPSIgKyAiO2V4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMSBHTVQiDQogICAgICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gIlNlc3Npb25JRD0iICsgIjtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDEgR01UIg0KICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9sb2dpbicNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmKGRhdGFuLnJvbGUgPT0gJ9C00LjRgNC10LrRgtC+0YAnKXsNCiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhbi5kYXRhDQogICAgICAgICAgICAgICAgdGhpcy5kaXJlY3RvciA9IHRydWUNCiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IHRoaXMuZGF0YVtpXS5sZW5ndGg7IGorKyl7DQogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmRhdGFbaV1bal0uY2hlY2tlZEV2ZW50cy5sZW5ndGggPT0gMCl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hW2ldICs9IDENCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYodGhpcy5kYXRhW2ldW2pdLmNoZWNrZWRFdmVudHMubGVuZ3RoID4gMCAmJiB0aGlzLmRhdGFbaV1bal0uY2hlY2tlZEV2ZW50cy5sZW5ndGggPD0gNSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jW2ldICs9IDENCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYodGhpcy5kYXRhW2ldW2pdLmNoZWNrZWRFdmVudHMubGVuZ3RoID4gNSAmJiB0aGlzLmRhdGFbaV1bal0uY2hlY2tlZEV2ZW50cy5sZW5ndGggPD0gMTApew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZFtpXSArPSAxDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZVtpXSArPSAxDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmKGRhdGFuLnJvbGUgPT0gJ9GD0YfQuNGC0LXQu9GMJyl7DQogICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YW4uZGF0YQ0KICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5kYXRhLmxlbmd0aDsgaiArKyl7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbal0ubGVuZ3RoICE9IDApew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zID0gag0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YW4uZGF0YVt0aGlzLnNdDQogICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZGF0YSkNCiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5kYXRhW2ldLmNoZWNrZWRFdmVudHMubGVuZ3RoID09IDApew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hW3RoaXMuc10gKz0gMQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYodGhpcy5kYXRhW2ldLmNoZWNrZWRFdmVudHMubGVuZ3RoID4gMCAmJiB0aGlzLmRhdGFbaV0uY2hlY2tlZEV2ZW50cy5sZW5ndGggPD0gNSl7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNbdGhpcy5zXSArPSAxDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLmRhdGFbaV0uY2hlY2tlZEV2ZW50cy5sZW5ndGggPiA1ICYmIHRoaXMuZGF0YVtpXS5jaGVja2VkRXZlbnRzLmxlbmd0aCA8PSAxMCl7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRbdGhpcy5zXSArPSAxDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZVt0aGlzLnNdICs9IDENCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmMpDQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgIH0pDQogICAgfSwNCn0NCg=="},{"version":3,"sources":["Statistics.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Statistics.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class='main'>\r\n        <div class=\"container warp\">\r\n            <h2>Статистика</h2>\r\n            <select class=\"custom-select custom-select-sm mb-3 events\" onchange=\"location.href=this.value\">\r\n                <option value=\"/friend-statistics\">Статистика друзей</option>\r\n                <option value=\"/school-statistics\" selected>Обобщенная статистика школы (только для сотрудников учебных заведений)</option>\r\n                <option value=\"/full-school-statistics\">Полная статистика школы (только для сотрудников учебных заведений)</option>\r\n            </select>\r\n            <div v-if=\"director\">\r\n                <div class=\"rate\" v-for=\"(item, index) in data\" :key=\"item.value\">\r\n                    <span class=\"numr row\">{{index + 1}} класс</span>\r\n                    <span class=\"row colv\">Учеников зарегистрировано: {{item.length}}</span>\r\n                    <span class=\"row colv\">Учеников, посетивших 0 мероприятий: {{a[index]}}</span>\r\n                    <span class=\"row colv\">Учеников, посетивших от 1 до 5 мероприятий: {{c[index]}}</span>\r\n                    <span class=\"row colv\">Учеников, посетивших от 5 до 10 мероприятий: {{d[index]}}</span>\r\n                    <span class=\"row colv\">Учеников, посетивших более 10 мероприятий: {{e[index]}}</span>\r\n                </div>\r\n            </div>\r\n            <div class=\"rate\" v-else>\r\n                <span class=\"row colv\">Учеников зарегистрировано: {{data.length}}</span>\r\n                <span class=\"row colv\">Учеников, посетивших 0 мероприятий: {{a[s]}}</span>\r\n                <span class=\"row colv\">Учеников, посетивших от 1 до 5 мероприятий: {{c[s]}}</span>\r\n                <span class=\"row colv\">Учеников, посетивших от 5 до 10 мероприятий: {{d[s]}}</span>\r\n                <span class=\"row colv\">Учеников, посетивших более 10 мероприятий: {{e[s]}}</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"footer\"><Footer></Footer></div> \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Footer from './footer.vue'\r\nexport default {\r\n    name: 'Statistics',\r\n    components: { Footer },\r\n    data(){\r\n        return{\r\n            data: [],\r\n            director: false,\r\n            s: 0,\r\n            a: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,],\r\n            c: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,],\r\n            d: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,],\r\n            e: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,],\r\n        }\r\n    },\r\n    beforeMount(){\r\n        if(this.$store.getters.email == ''){\r\n          this.$router.push(\"/login\")\r\n        }\r\n        let email = this.$store.getters.email\r\n        let SessionID = this.$store.getters.SessionID\r\n        fetch(this.$store.state.serverIp+'/api/getOtherInformation', {\r\n        method: 'get',\r\n        headers: {email: email, sessionid: SessionID},\r\n        })\r\n        .then(response => {\r\n            console.log(\"res\", response)\r\n            return response.json()\r\n        })\r\n        .then(datan => {\r\n            if(datan == '310'){\r\n                document.cookie = \"email=\" + \";expires=Thu, 01 Jan 1970 00:00:01 GMT\"\r\n                document.cookie = \"SessionID=\" + \";expires=Thu, 01 Jan 1970 00:00:01 GMT\"\r\n                window.location.href = '/login'\r\n            }\r\n            if(datan.role == 'директор'){\r\n                this.data = datan.data\r\n                this.director = true\r\n                for(let i = 0; i < this.data.length; i++){\r\n                    for(let j = 0; j < this.data[i].length; j++){\r\n                        if(this.data[i][j].checkedEvents.length == 0){\r\n                            this.a[i] += 1\r\n                        }\r\n                        else if(this.data[i][j].checkedEvents.length > 0 && this.data[i][j].checkedEvents.length <= 5){\r\n                            this.c[i] += 1\r\n                        }\r\n                        else if(this.data[i][j].checkedEvents.length > 5 && this.data[i][j].checkedEvents.length <= 10){\r\n                            this.d[i] += 1\r\n                        }\r\n                        else{\r\n                            this.e[i] += 1\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if(datan.role == 'учитель'){\r\n                this.data = datan.data\r\n                for (let j = 0; j < this.data.length; j ++){\r\n                    if (this.data[j].length != 0){\r\n                        this.s = j\r\n                        this.data = datan.data[this.s]\r\n                        break\r\n                    }\r\n                }\r\n                console.log(this.data)\r\n                for(let i = 0; i < this.data.length; i++){\r\n                    if(this.data[i].checkedEvents.length == 0){\r\n                        this.a[this.s] += 1\r\n                    }\r\n                    else if(this.data[i].checkedEvents.length > 0 && this.data[i].checkedEvents.length <= 5){\r\n                        this.c[this.s] += 1\r\n                    }\r\n                    else if(this.data[i].checkedEvents.length > 5 && this.data[i].checkedEvents.length <= 10){\r\n                        this.d[this.s] += 1\r\n                    }\r\n                    else{\r\n                        this.e[this.s] += 1\r\n                    }\r\n                }\r\n                console.log(this.c)\r\n            }\r\n            \r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        })\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.warp{\r\n    flex: 1 0 auto;\r\n    padding-top: 110px !important;\r\n    background-color: #fff;\r\n    padding: 0px 30px;\r\n}\r\n.footer{\r\n    flex: 0 0 auto;\r\n}\r\n.main{\r\n    display: flex;\r\n\tflex-direction: column;\r\n}\r\n.main{\r\n    height: 100%;\r\n    padding: 0px;\r\n    min-height: 100vh;\r\n    margin-bottom: 0px;\r\n}\r\n\r\n.card{ \r\n    margin-top: 10px !important;\r\n}\r\n.card-body{ \r\n    text-align: left !important;\r\n}\r\n.card-body h5{ \r\n    font-weight: bold;\r\n}\r\n</style>"]}]}