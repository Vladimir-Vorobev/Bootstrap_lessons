{"remainingRequest":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\vovav\\Desktop\\ProfEvents\\src\\components\\FullStatistics.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\src\\components\\FullStatistics.vue","mtime":1594106006467},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBGb290ZXIgZnJvbSAnLi9mb290ZXIudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdGdWxsU3RhdGlzdGljcycsCiAgY29tcG9uZW50czogewogICAgRm9vdGVyOiBGb290ZXIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzOiAwLAogICAgICBkaXJlY3RvcjogZmFsc2UsCiAgICAgIGRhdGE6IFtdCiAgICB9OwogIH0sCiAgYmVmb3JlTW91bnQ6IGZ1bmN0aW9uIGJlZm9yZU1vdW50KCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVycy5lbWFpbCA9PSAnJykgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICB9CgogICAgdmFyIGVtYWlsID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5lbWFpbDsKICAgIHZhciBTZXNzaW9uSUQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLlNlc3Npb25JRDsKICAgIGZldGNoKHRoaXMuJHN0b3JlLnN0YXRlLnNlcnZlcklwICsgJy9hcGkvZ2V0T3RoZXJJbmZvcm1hdGlvbicsIHsKICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgaGVhZGVyczogewogICAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgICBzZXNzaW9uaWQ6IFNlc3Npb25JRAogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBjb25zb2xlLmxvZygicmVzIiwgcmVzcG9uc2UpOwogICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YW4pIHsKICAgICAgaWYgKGRhdGFuID09ICczMTAnKSB7CiAgICAgICAgZG9jdW1lbnQuY29va2llID0gImVtYWlsPSIgKyAiO2V4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMSBHTVQiOwogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICJTZXNzaW9uSUQ9IiArICI7ZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAxIEdNVCI7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2xvZ2luJzsKICAgICAgfQoKICAgICAgaWYgKGRhdGFuLnJvbGUgPT0gJ9C00LjRgNC10LrRgtC+0YAnKSB7CiAgICAgICAgX3RoaXMuZGF0YSA9IGRhdGFuLmRhdGE7CiAgICAgICAgX3RoaXMuZGlyZWN0b3IgPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKGRhdGFuLnJvbGUgPT0gJ9GD0YfQuNGC0LXQu9GMJykgewogICAgICAgIF90aGlzLmRhdGEgPSBkYXRhbi5kYXRhOwoKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IF90aGlzLmRhdGEubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmIChfdGhpcy5kYXRhW2pdLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICAgIF90aGlzLmRhdGEgPSBbZGF0YW4uZGF0YVtqXV07CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY29uc29sZS5sb2coX3RoaXMuZGF0YSk7CiAgICAgIH0KICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["FullStatistics.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,OAAA,MAAA,MAAA,cAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,gBADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,MAAA,EAAA;AAAA,GAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,CAAA,EAAA,CADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,IAAA,EAAA;AAHA,KAAA;AAKA,GATA;AAUA,EAAA,WAVA,yBAUA;AAAA;;AACA,QAAA,KAAA,MAAA,CAAA,OAAA,CAAA,KAAA,IAAA,EAAA,EAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA;;AACA,QAAA,KAAA,GAAA,KAAA,MAAA,CAAA,OAAA,CAAA,KAAA;AACA,QAAA,SAAA,GAAA,KAAA,MAAA,CAAA,OAAA,CAAA,SAAA;AACA,IAAA,KAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA,GAAA,0BAAA,EAAA;AACA,MAAA,MAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAAA,QAAA,KAAA,EAAA,KAAA;AAAA,QAAA,SAAA,EAAA;AAAA;AAFA,KAAA,CAAA,CAIA,IAJA,CAIA,UAAA,QAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,EAAA,QAAA;AACA,aAAA,QAAA,CAAA,IAAA,EAAA;AACA,KAPA,EAQA,IARA,CAQA,UAAA,KAAA,EAAA;AACA,UAAA,KAAA,IAAA,KAAA,EAAA;AACA,QAAA,QAAA,CAAA,MAAA,GAAA,WAAA,wCAAA;AACA,QAAA,QAAA,CAAA,MAAA,GAAA,eAAA,wCAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,IAAA,GAAA,QAAA;AACA;;AACA,UAAA,KAAA,CAAA,IAAA,IAAA,UAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,KAAA,CAAA,IAAA;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA,OAHA,MAIA,IAAA,KAAA,CAAA,IAAA,IAAA,SAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,KAAA,CAAA,IAAA;;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,CAAA,IAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,cAAA,KAAA,CAAA,IAAA,CAAA,CAAA,EAAA,MAAA,IAAA,CAAA,EAAA;AACA,YAAA,KAAA,CAAA,IAAA,GAAA,CAAA,KAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA;AACA;AACA;AACA;;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,IAAA;AACA;AACA,KA5BA,EA6BA,KA7BA,CA6BA,UAAA,GAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,KA/BA;AAgCA;AAhDA,CAAA","sourcesContent":["<template>\r\n    <div class='main'>\r\n        <div class=\"container warp\">\r\n            <h2>Статистика</h2>\r\n            <select class=\"custom-select custom-select-sm mb-3 events\" onchange=\"location.href=this.value\">\r\n                <option value=\"/friend-statistics\">Статистика друзей</option>\r\n                <option value=\"/school-statistics\">Обобщенная статистика школы (только для сотрудников учебных заведений)</option>\r\n                <option value=\"/full-school-statistics\" selected>Полная статистика школы (только для сотрудников учебных заведений)</option>\r\n            </select>\r\n            <div v-for=\"(item, index) in data\" :key=\"item.value\">\r\n                <div v-if=\"director\">{{index + 1}} класс</div> <br>\r\n                <div v-if=\"item.length == 0\">Никого не зарегистрировано</div> <br>\r\n                <div v-for=\"item2 in item\" :key=\"item2.value\">\r\n                    <div>{{item2.name}} {{item2.surname}} {{item2.class_number}} {{item2.simvol}} </div> <br>\r\n                    <div v-if=\"item2.checkedEvents.length == 0\">Нигде не участвует</div> <br>\r\n                    <div v-for=\"item3 in item2.checkedEvents\" :key=\"item3.value\">\r\n                        <div class=\"card\">\r\n                            <div class=\"card-body\">\r\n                                <h5 class=\"card-title\">{{item3.name}}</h5>\r\n                                <p class=\"card-text\"><i class=\"far fa-clock\"></i> {{item3.time}}</p>\r\n                                <p class=\"card-text\">Тип: {{item3.type}}</p>\r\n                                <a :href=\"item3.link\" class=\"btn btn-primary\">Перейти к мероприятию</a>\r\n                            </div>\r\n                            <div class=\"card-footer text-muted\">{{item3.date}}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"footer\"><Footer></Footer></div> \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Footer from './footer.vue'\r\nexport default {\r\n    name: 'FullStatistics',\r\n    components: { Footer },\r\n    data(){\r\n        return{\r\n            s: 0,\r\n            director: false,\r\n            data: [],\r\n        }\r\n    },\r\n    beforeMount(){\r\n        if(this.$store.getters.email == ''){\r\n          this.$router.push(\"/login\")\r\n        }\r\n        let email = this.$store.getters.email\r\n        let SessionID = this.$store.getters.SessionID\r\n        fetch(this.$store.state.serverIp+'/api/getOtherInformation', {\r\n            method: 'get',\r\n            headers: {email: email, sessionid: SessionID},\r\n        })\r\n        .then(response => {\r\n            console.log(\"res\", response)\r\n            return response.json()\r\n        })\r\n        .then(datan => {\r\n            if(datan == '310'){\r\n                document.cookie = \"email=\" + \";expires=Thu, 01 Jan 1970 00:00:01 GMT\"\r\n                document.cookie = \"SessionID=\" + \";expires=Thu, 01 Jan 1970 00:00:01 GMT\"\r\n                window.location.href = '/login'\r\n            }\r\n            if(datan.role == 'директор'){\r\n                this.data = datan.data\r\n                this.director = true\r\n            }\r\n            else if(datan.role == 'учитель'){\r\n                this.data = datan.data\r\n                for (let j = 0; j < this.data.length; j ++){\r\n                    if (this.data[j].length != 0){\r\n                        this.data = [datan.data[j]]\r\n                        break\r\n                    }\r\n                }\r\n                console.log(this.data)\r\n            }\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        })\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.warp{\r\n    flex: 1 0 auto;\r\n    padding-top: 110px !important;\r\n    background-color: #fff;\r\n    padding: 0px 30px;\r\n}\r\n.footer{\r\n    flex: 0 0 auto;\r\n}\r\n.main{\r\n    display: flex;\r\n\tflex-direction: column;\r\n}\r\n.main{\r\n    height: 100%;\r\n    padding: 0px;\r\n    min-height: 100vh;\r\n    margin-bottom: 0px;\r\n}\r\n.card{ \r\n    margin-top: 10px !important;\r\n}\r\n.card-body{ \r\n    text-align: left !important;\r\n}\r\n.card-body h5{ \r\n    font-weight: bold;\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}