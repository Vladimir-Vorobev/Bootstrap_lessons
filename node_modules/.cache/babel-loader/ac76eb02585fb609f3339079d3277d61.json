{"remainingRequest":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\vovav\\Desktop\\ProfEvents\\src\\components\\FriendStatistics.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\src\\components\\FriendStatistics.vue","mtime":1594106006467},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\vovav\\Desktop\\ProfEvents\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IG5lZWRsZSBmcm9tICduZWVkbGUnOwppbXBvcnQgRm9vdGVyIGZyb20gJy4vZm9vdGVyLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU3RhdGlzdGljcycsCiAgY29tcG9uZW50czogewogICAgRm9vdGVyOiBGb290ZXIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhOiBbXQogICAgfTsKICB9LAogIGJlZm9yZU1vdW50OiBmdW5jdGlvbiBiZWZvcmVNb3VudCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnMuZW1haWwgPT0gJycpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpOwogICAgfQoKICAgIHZhciBlbWFpbCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZW1haWw7CiAgICB2YXIgU2Vzc2lvbklEID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5TZXNzaW9uSUQ7CiAgICBmZXRjaCh0aGlzLiRzdG9yZS5zdGF0ZS5zZXJ2ZXJJcCArICcvYXBpL2dldENvZGVJbmZvcm1hdGlvbicsIHsKICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgaGVhZGVyczogewogICAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgICBzZXNzaW9uaWQ6IFNlc3Npb25JRAogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBjb25zb2xlLmxvZygicmVzIiwgcmVzcG9uc2UpOwogICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICBpZiAoZGF0YSA9PSAnMzEwJykgewogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICJlbWFpbD0iICsgIjtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDEgR01UIjsKICAgICAgICBkb2N1bWVudC5jb29raWUgPSAiU2Vzc2lvbklEPSIgKyAiO2V4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMSBHTVQiOwogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9sb2dpbic7CiAgICAgIH0KCiAgICAgIF90aGlzLmRhdGEgPSBkYXRhOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRGcmllbmQ6IGZ1bmN0aW9uIGFkZEZyaWVuZCgpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIFNlc3Npb25JRCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuU2Vzc2lvbklEOwoKICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYW1lJykudmFsdWUudHJpbSgpID09ICcnKSB7CiAgICAgICAgdGhpcy4kc3dhbCh7CiAgICAgICAgICBpY29uOiAnd2FybmluZycsCiAgICAgICAgICB0ZXh0OiAn0JLQstC10LTQuNGC0LUg0L3QvtC80LXRgCcKICAgICAgICB9KTsgLy9hbGVydCgn0JLQstC10LTQuNGC0LUg0L3QvtC80LXRgCcpCiAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hbWUnKS52YWx1ZS50cmltKCkgPT0gJy0xJykgewogICAgICAgIHRoaXMuJHN3YWwoewogICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgIHRleHQ6ICfQktCy0LXQtNC40YLQtSDQutC+0YDRgNC10LrRgtC90YvQuSDQvdC+0LzQtdGAJwogICAgICAgIH0pOyAvL2FsZXJ0KCfQktCy0LXQtNC40YLQtSDQutC+0YDRgNC10LrRgtC90YvQuSDQvdC+0LzQtdGAJykKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgZW1haWwgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmVtYWlsOwogICAgICAgIG5lZWRsZS5wb3N0KHRoaXMuJHN0b3JlLnN0YXRlLnNlcnZlcklwICsgJy9hcGkvYWRkRnJpZW5kQ29kZScsIHsKICAgICAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgICAgIHNlc3Npb25pZDogU2Vzc2lvbklELAogICAgICAgICAgc3RhdE51bWJlcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hbWUnKS52YWx1ZQogICAgICAgIH0sIHsKICAgICAgICAgICJqc29uIjogdHJ1ZQogICAgICAgIH0sIGZ1bmN0aW9uIChlcnIsIHJlcykgewogICAgICAgICAgaWYgKGVycikgY29uc29sZS5sb2coZXJyKTsKCiAgICAgICAgICBpZiAocmVzLmJvZHkgPT0gJzMxMCcpIHsKICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gImVtYWlsPSIgKyAiO2V4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMSBHTVQiOwogICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSAiU2Vzc2lvbklEPSIgKyAiO2V4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMSBHTVQiOwogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvbG9naW4nOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIGRhdGEgPSByZXMuYm9keTsKCiAgICAgICAgICAgIGlmIChkYXRhID09ICdDb2RlIG5vdCBmb3VuZCcpIHsKICAgICAgICAgICAgICAvL2FsZXJ0KCfQn9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0L3QtSDQvdCw0LnQtNC10L0nKQogICAgICAgICAgICAgIHRoaXMuJHN3YWwoewogICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgICAgICAgIHRleHQ6ICfQn9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0L3QtSDQvdCw0LnQtNC10L0nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy9hbGVydCgn0J/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINGD0YHQv9C10YjQvdC+INC00L7QsdCw0LLQu9C10L0nKQogICAgICAgICAgICAgIHRoaXMuJHN3YWwoewogICAgICAgICAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgdGV4dDogJ9Cf0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDRg9GB0L/QtdGI0L3QviDQtNC+0LHQsNCy0LvQtdC9JwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["FriendStatistics.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class='main'>\r\n        <div class=\"container warp\">\r\n            <h2>Статистика</h2>\r\n            <select class=\"custom-select custom-select-sm mb-3 events\" onchange=\"location.href=this.value\">\r\n                <option value=\"/friend-statistics\" selected>Статистика друзей</option>\r\n                <option value=\"/school-statistics\">Обобщенная статистика школы (только для сотрудников учебных заведений)</option>\r\n                <option value=\"/full-school-statistics\">Полная статистика школы (только для сотрудников учебных заведений)</option>\r\n            </select>\r\n            <div class=\"form-group row\">\r\n                <div class=\"col-12 col-md-8\"><input name=\"code\" class=\"form-control name\" placeholder=\"Код от Вашего друга\"></div>\r\n                <div class=\"col-12 col-md-4\" style=\"padding: 0px 15px;\"><button class=\"btn btn-outline-success\" style=\"width: 100%;\" @click=\"addFriend()\">Добавить друга</button></div>\r\n            </div>\r\n            <div class=\"form-group row code\"></div>\r\n            <div class=\"student\" v-for=\"item in data\" :key=\"item.value\">\r\n                <div class=\"si row\">\r\n                    <div class=\"col-12 col-md-6\"><span class=\"ns\">{{item.name}} {{item.surname}}</span></div>\r\n                    <div class=\"col-6 col-md-3\">Класс: <span class=\"numc\">{{item.class_number}}</span></div>\r\n                    <div class=\"col-6 col-md-3\">Символ: <span class=\"simvol\">{{item.simvol}}</span></div>\r\n                </div>\r\n                <div v-if=\"item.checkedEvents.length == 0\">Нигде не участвует <br></div>\r\n                <div class=\"card\" v-else v-for=\"item2 in item.checkedEvents\" :key=\"item2.value\">\r\n                    <div class=\"card-header\">{{item2.date}}</div>\r\n                    <div class=\"card-body\">\r\n                        <h5 class=\"card-title\">{{item2.name}}</h5>\r\n                        <p class=\"card-text\"><i class=\"far fa-clock\"></i> {{item2.time}}</p>\r\n                        <p class=\"card-text\">Тип: {{item2.type}}</p>\r\n                        <a :href=\"item2.link\" class=\"btn btn-primary\">Перейти к мероприятию</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"footer\"><Footer></Footer></div> \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport needle from 'needle'\r\nimport Footer from './footer.vue'\r\nexport default {\r\n    name: 'Statistics',\r\n    components: { Footer },\r\n    data(){\r\n        return{\r\n            data: []\r\n        }\r\n    },\r\n    beforeMount(){\r\n        if(this.$store.getters.email == ''){\r\n          this.$router.push(\"/login\")\r\n        }\r\n        let email = this.$store.getters.email\r\n        let SessionID = this.$store.getters.SessionID\r\n        fetch(this.$store.state.serverIp+'/api/getCodeInformation', {\r\n            method: 'get',\r\n            headers: {email: email, sessionid: SessionID},\r\n        })\r\n        .then(response => {\r\n            console.log(\"res\", response)\r\n            return response.json()\r\n        })\r\n        .then(data => {\r\n            if(data == '310'){\r\n                document.cookie = \"email=\" + \";expires=Thu, 01 Jan 1970 00:00:01 GMT\"\r\n                document.cookie = \"SessionID=\" + \";expires=Thu, 01 Jan 1970 00:00:01 GMT\"\r\n                window.location.href = '/login'\r\n            }\r\n            this.data = data\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        })\r\n    },\r\n    methods:{\r\n        addFriend(){\r\n            event.preventDefault()\r\n            let SessionID = this.$store.getters.SessionID\r\n            if(document.querySelector('.name').value.trim() == ''){\r\n                this.$swal({\r\n                    icon: 'warning',\r\n                    text: 'Введите номер'\r\n                }); //alert('Введите номер')\r\n            }\r\n            else if(document.querySelector('.name').value.trim() == '-1'){\r\n                this.$swal({\r\n                    icon: 'error',\r\n                    text: 'Введите корректный номер'\r\n                });//alert('Введите корректный номер')\r\n            } \r\n            else{\r\n                let email = this.$store.getters.email\r\n                needle.post(this.$store.state.serverIp+'/api/addFriendCode', {email: email, sessionid: SessionID, statNumber: document.querySelector('.name').value}, {\"json\": true}, function(err, res){\r\n                if (err) console.log(err)\r\n                if(res.body == '310'){\r\n                    document.cookie = \"email=\" + \";expires=Thu, 01 Jan 1970 00:00:01 GMT\"\r\n                    document.cookie = \"SessionID=\" + \";expires=Thu, 01 Jan 1970 00:00:01 GMT\"\r\n                    window.location.href = '/login'\r\n                }\r\n                else{\r\n                    let data = res.body\r\n                    if(data == 'Code not found'){\r\n                        //alert('Пользователь не найден')\r\n                        this.$swal({\r\n                            icon: 'error',\r\n                            text: 'Пользователь не найден'\r\n                        });\r\n                    }\r\n                    else{\r\n                        //alert('Пользователь успешно добавлен')\r\n                        this.$swal({\r\n                            icon: 'success',\r\n                            text: 'Пользователь успешно добавлен'\r\n                        });\r\n                        document.location.reload()\r\n                    }\r\n                }\r\n                })\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.warp{\r\n    flex: 1 0 auto;\r\n    padding-top: 110px !important;\r\n    background-color: #fff;\r\n    padding: 0px 30px;\r\n}\r\n.footer{\r\n    flex: 0 0 auto;\r\n}\r\n.main{\r\n    display: flex;\r\n\tflex-direction: column;\r\n}\r\n.main{\r\n    height: 100%;\r\n    padding: 0px;\r\n    min-height: 100vh;\r\n    margin-bottom: 0px;\r\n}\r\n.card{ \r\n    margin-top: 10px !important;\r\n}\r\n.card-body{\r\n    text-align: left !important;\r\n}\r\n.card-header{\r\n    font-weight: bold;\r\n}\r\n.card-body h5{\r\n    font-weight: bold;\r\n}\r\n.student{\r\n    margin-top: 2.5em;border: 1.5px solid #818181;\r\n    /* Белая рамка */\r\n    border-radius: 10px;\r\n    /* Радиус скругления */\r\n    padding: 1.2em;\r\n}\r\n.si{\r\n    font-size: 1.5em;margin-bottom: 1.5em;\r\n}\r\n.stat_school{\r\n    margin-top: 1.5em;\r\n}\r\n.rate{\r\n    text-align: left;\r\n    font-size: 1.3em;\r\n    margin-bottom: 2em;\r\n}\r\n.numr{\r\n    font-size: 1.5em !important;\r\n    font-weight: bold;\r\n}\r\n.colv{\r\n    margin-left: 1.5em;\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}